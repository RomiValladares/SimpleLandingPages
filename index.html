<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Sorteo – Depop UY</title>

  <!-- Custom font (OTF) -->
  <style>
    /* Load your .otf (relative to index.html) */
    @font-face{
      font-family: "Ahsing";
      src: url("ahsing-font/typogama-ahsing.otf") format("opentype");
      font-weight: 400 900;
      font-style: normal;
      font-display: swap; /* shows system font first, swaps when loaded */
    }
  </style>

  <style>
    /* ====== THEME TOKENS ====== */
    :root{
      /* Your background image file */
      --bg-image: url('bg.jpg');

      /* Colors */
      --tint: rgba(144, 33, 41, .92);     /* overlay wine/red */
      --card: rgba(255,255,255,.97);
      --text: #2A2A2A;
      --muted:#6b6f76;
      --accent:#E59E20;                   /* CTA button */
      --accentText:#fff;

      /* Radii & shadows */
      --radius-xl: 22px;
      --radius-md: 12px;
      --shadow-lg: 0 14px 36px rgba(0,0,0,.22);
      --shadow-sm: 0 6px 16px rgba(0,0,0,.12);
    }

    /* ====== BASE ====== */
    html,body{height:100%}
    html{-webkit-text-size-adjust:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: #000;
      position: relative;
      overflow-x: hidden;
      min-height: 100dvh; /* better on mobile */
    }

    /* Background image + tint */
    .bg{
      position:fixed; inset:0; z-index:-2;
      background-image: var(--bg-image);
      background-size: cover;
      background-position: center;
    }
    .tint{
      position:fixed; inset:0; z-index:-1;
      background: var(--tint);
    }

    /* Headline block */
    .wrap{
      width:min(960px, 92vw);
      padding: clamp(10px, 3vw, 18px);
      margin: clamp(8px, 2.5vh, 24px) auto 0;
      text-align:center;
    }
    .brand{
      margin: 0 0 6px;
      color: #ffe6d1;
      letter-spacing: .12em;
      font-weight: 900;
      text-transform: uppercase;
      font-size: clamp(12px, 2.6vw, 16px);
    }
    .title{
      margin: 0 0 10px;
      font-family: "Ahsing", ui-serif, Georgia, serif; /* use your font */
      line-height: 1.05;
      font-size: clamp(26px, 10vw, 44px);
      color: #fff;
      text-shadow: 0 2px 8px rgba(0,0,0,.22);
    }
    .sub{
      margin: 0 auto;
      max-width: 680px;
      color:#ffe6d1;
      font-size: clamp(14px, 3.8vw, 18px);
    }

    /* Card & slab (reused in modal + fallback) */
    .card{
      width:min(720px, 94vw);
      margin: clamp(8px, 2.5vh, 18px) auto;
      background: var(--card);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      backdrop-filter: blur(2px);
      overflow:hidden;
    }
    .card-body{
      padding: clamp(14px, 4.2vw, 28px);
    }
    .slab{
      margin: 0 auto;
      width:min(640px, 100%);
      background: rgba(255,255,255,.98);
      border-radius: 16px;
      box-shadow: var(--shadow-sm);
      padding: clamp(12px, 4vw, 22px);
    }

    /* Form */
    .mc-field{ margin-bottom: 12px; text-align:left }
    .lab{ display:block; margin:0 0 6px; font-weight:600; color: var(--muted); font-size: clamp(13px,3.5vw,14px) }
    .input{
      width:100%; box-sizing:border-box;
      padding: clamp(12px, 3.6vw, 14px) clamp(14px,3.6vw,16px);
      font-size: clamp(16px, 4.2vw, 16px);
      border: 1px solid #d8dae0; border-radius: 12px; outline: none;
      background:#fff;
    }
    .input:focus{ border-color:#b8bcc6; box-shadow: 0 0 0 4px rgba(229,158,32,.12) }
    .cta{
      width:100%; padding: clamp(12px, 3.8vw, 14px) clamp(16px, 4.2vw, 18px); border:0;
      border-radius: 12px; cursor:pointer;
      background: var(--accent); color: var(--accentText);
      font-weight:800; font-size: clamp(16px, 4.5vw, 16px); letter-spacing:.02em;
      transition: transform .05s ease;
      touch-action: manipulation;
    }
    .cta:active{ transform: translateY(1px) }
    .muted { color: var(--muted); font-size: clamp(12px,3.4vw,13px); margin-top: 10px; text-align:center }

    /* Fallback container */
    .hidden{ display:none }

    /* ====== Modal popup (mobile-first) ====== */
    .overlay{
      position: fixed; inset:0; z-index: 10;
      display:none; align-items: flex-start; justify-content:center;
      padding: max(env(safe-area-inset-top), 12px) 12px 12px;
    }
    .overlay[data-open="1"]{ display:flex }
    .overlay::before{ content:""; position:absolute; inset:0; backdrop-filter: blur(1.5px) }

    .modal{ position:relative; width:min(720px, 94vw) }
    .close{
      position:absolute; top: 10px; right: 12px; border:0; background:transparent;
      color:#fff; font-size: 28px; line-height:1; cursor:pointer; z-index:11;
      text-shadow: 0 2px 8px rgba(0,0,0,.35);
      padding: 8px;
    }

    /* Small phones: tighten paddings/shadows */
    @media (max-width: 420px){
      .card{ box-shadow: 0 10px 26px rgba(0,0,0,.18) }
      .slab{ border-radius: 14px }
    }
  </style>
</head>
<body>
  <!-- Background image + tint -->
  <div class="bg" aria-hidden="true"></div>
  <div class="tint" aria-hidden="true"></div>

  <!-- Headings -->
  <div class="wrap" aria-hidden="true">
    <p class="brand">DEPOP_UY</p>
    <h1 class="title">Sorteo maquillaje Elf</h1>
    <p class="sub">Con tu email tenés más chances de participar. Además, te regalamos un cupón de $300 para tu próxima compra.</p>
  </div>

  <!-- ===== FALLBACK (for IG/Firefox/blocked JS) ===== -->
  <div id="fallback" class="hidden">
    <div class="card">
      <div class="card-body">
        <div class="slab">
          <form action="https://cuerporaizbreathwork.us8.list-manage.com/subscribe/post?u=da01e192b9e5c7e47f1697a1b&amp;id=415cc74907&amp;f_id=00810fe1f0"
                method="post" target="_self" novalidate>
            <div class="mc-field">
              <label class="lab" for="mce-EMAIL">Tu email</label>
              <input class="input" type="email" name="EMAIL" id="mce-EMAIL" required autocomplete="email" />
            </div>

            <!-- honeypot (must keep) -->
            <div aria-hidden="true" style="position:absolute; left:-5000px;">
              <input type="text" name="b_da01e192b9e5c7e47f1697a1b_415cc74907" tabindex="-1" value="">
            </div>

            <button class="cta" type="submit">Participar</button>
            <p class="muted">Revisá tu bandeja (y spam) tras enviar.</p>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== MODAL POPUP ===== -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <button id="close" class="close" aria-label="Cerrar">×</button>
    <div class="modal card">
      <div class="card-body">
        <div class="slab">
          <form action="https://cuerporaizbreathwork.us8.list-manage.com/subscribe/post?u=da01e192b9e5c7e47f1697a1b&amp;id=415cc74907&amp;f_id=00810fe1f0"
                method="post" target="_self" novalidate>
            <div class="mc-field">
              <label class="lab" for="mce-EMAIL-2">Tu email</label>
              <input class="input" type="email" name="EMAIL" id="mce-EMAIL-2" required autocomplete="email" />
            </div>
            <div aria-hidden="true" style="position:absolute; left:-5000px;">
              <input type="text" name="b_da01e192b9e5c7e47f1697a1b_415cc74907" tabindex="-1" value="">
            </div>
            <button class="cta" type="submit">Participar</button>
            <p class="muted">Revisá tu bandeja (y spam) tras enviar.</p>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Clear MC suppression so you can retest -->
  <script>
    (function () {
      ["MCPopupClosed","MCPopupSubscribed"].forEach(function (name) {
        document.cookie = name+"=; Max-Age=0; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;";
        document.cookie = name+"=; Max-Age=0; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=."+location.hostname+";";
      });
      try {
        ["localStorage","sessionStorage"].forEach(function(store){
          var s=window[store]; if(!s) return;
          var ks=[]; for(var i=0;i<s.length;i++) ks.push(s.key(i));
          ks.forEach(function(k){ var kk=(k||"").toLowerCase(); if(kk.includes("mc")||kk.includes("popup")) s.removeItem(k); });
        });
      } catch(e){}
    })();
  </script>

  <!-- Detect IG/FB webview or Firefox strict => show fallback, skip mcjs -->
  <script>
    (function () {
      var ua = navigator.userAgent || "";
      var isIG = ua.includes("Instagram");
      var isFB = ua.includes("FBAN") || ua.includes("FBAV");
      var isFirefox = ua.includes("Firefox");
      if (isIG || isFB || isFirefox) {
        document.getElementById("fallback").classList.remove("hidden");
        window.skipMcPopup = true;
      }
    })();
  </script>

  <!-- Load Mailchimp mcjs if allowed; open modal quickly for smooth UX -->
  <script>
    (function () {
      function openModal(){
        var ov = document.getElementById('overlay'); if(!ov) return;
        ov.setAttribute('data-open','1');
        var close = document.getElementById('close');
        close.onclick = function(){ ov.removeAttribute('data-open'); };
        ov.addEventListener('click', function(e){ if(e.target===ov){ close.click(); }});
        window.addEventListener('keydown', function(e){ if(e.key==='Escape'){ close.click(); }});
      }

      if (window.skipMcPopup) return;  // IG/Firefox/etc → fallback only

      // Open our modal quickly (even if mcjs gets blocked later)
      setTimeout(openModal, 300);

      // Load mcjs (kept for connected-site/analytics if allowed)
      var s = document.createElement("script");
      s.id = "mcjs";
      s.async = 1;
      s.src = "https://chimpstatic.com/mcjs-connected/js/users/da01e192b9e5c7e47f1697a1b/aee3b1fd5f761d99c97a62e16.js";
      document.body.appendChild(s);

      // Ensure fallback is visible under modal after a moment
      setTimeout(function(){
        document.getElementById("fallback").classList.remove("hidden");
      }, 1200);
    })();
  </script>
</body>
</html>
